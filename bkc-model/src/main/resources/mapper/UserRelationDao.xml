<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.bitflash.dao.UserRelationDao">
    <update id="insertTreeNode" statementType="CALLABLE">
        <![CDATA[
 		call insertTreeNode_vip(#{f_uid,jdbcType=VARCHAR,mode=IN},#{c_uid,jdbcType=VARCHAR,mode=IN},
 		#{code,jdbcType=VARCHAR,mode=IN},#{area,jdbcType=VARCHAR,mode=IN})
 		 ]]>
    </update>

    <select id="selectTreeNodes" parameterType="java.lang.String"
            statementType="CALLABLE" useCache="false"
            resultType="cn.bitflash.entity.UserRelationEntity">
        <![CDATA[
		call selectTreeNodes_vip(#{f_uid,jdbcType=VARCHAR,mode=IN})
		 ]]>
    </select>

    <select id="selectTreeNood" parameterType="java.lang.String"
            statementType="CALLABLE" useCache="false"
            resultType="cn.bitflash.bean.UserRelationJoinNpcAndHlbean">
        <![CDATA[
		call selectTreeNood(#{f_uid,jdbcType=VARCHAR,mode=IN})
		 ]]>
    </select>

    <select id="selectRelationAndMobileByCode" resultType="cn.bitflash.bean.UserInfoBean" parameterType="java.lang.String">
      select
        us.mobile ,
        us.create_time
      FROM
        user_relation ur
      LEFT JOIN
        user_secret us
      on
        ur.uid = us.uid
      where ur.code = #{code }
    </select>






</mapper>